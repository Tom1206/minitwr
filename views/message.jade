doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(name='description', content='Mini Twitter Projet ProgWeb L1 S2 2015')
    link(rel='shortcut icon', href='assets/ico/favicon.png')
    title Twitchers
    script(src='assets/js/jquery.min.js')
    // Bootstrap core CSS
    link(href='assets/css/bootstrap.css', rel='stylesheet')
    // Custom styles
    link(href='assets/css/style.css', rel='stylesheet')

  body
    // navbar
    #navigation.navbar.navbar-default.navbar-fixed-top
      .container
        .navbar-header
          button.navbar-toggle(type='button', data-toggle='collapse', data-target='.navbar-collapse')
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='home')
            span.glyphicon.glyphicon-leaf
          a.navbar-brand(href='public/#{user._id}')
            | #{user.username}
        .navbar-collapse.collapse
          .col-sm-9.col-md-7.pull-left
            form.navbar-form(role='search', action='/search', method='post', enctype='plain')
              .input-group
                input.form-control(type='text', placeholder='Search (profile, tweet, location, etc...)', name='research')
                .input-group-btn
                  button.btn.btn-default(type='submit')
                    span.glyphicon.glyphicon-search
          .col-sm-3.col-md-3.pull-left
            ul.nav.navbar-nav
              li
                a(title='Home', href='/home')
                  span.glyphicon.glyphicon-home
              li
                a(title='Messages', href='/message')
                  span.glyphicon.glyphicon-envelope
              li
                a(title=' modify profile', href='/profile')
                  span.glyphicon.glyphicon-cog
              li
                a(title='LogOut', href='/signout')
                  span.glyphicon.glyphicon-off
    br
    br
    br
    br
    .container
      .row
        .col-md-2.col-sm-2.pull-left
          form#write(action='/', method='post')
            .input-group
              input.form-control(type='text', name='who', id='who', placeholder='Who ?')
              .input-group-btn
                .form-group
                  button.btn.btn-default(type='submit')
                    span.glyphicon.glyphicon-pencil

        .col-md-7.col-sm-7.pull-left
          .row
            .overflow

          .row
            form#newMessage(action='/', method='post')
              .col-md-11.col-sm-11.pull-left
                input.form-control(type='text', name='message', id='message', placeholder='Your message')
              .col-md-1.col-sm-1.pull-left
                .input-group-btn
                  .form-group
                    button.btn.btn-default(type='submit')
                      | Send

    script(src='http://localhost:8080/socket.io/socket.io.js')
    script.
      var socket = io.connect('http://localhost:8080');
      $('#newMessage').submit(function () {
                    var message = $('#message').val();
                    socket.emit('message', message); // Transmet le message aux autres
                    $('#message').val('').focus(); // Vide la zone de Chat et remet le focus dessus
                    return false; // Permet de bloquer l'envoi "classique" du formulaire
                });

      $('#write').submit(function () {
                  var who = $('#who').val();
                  socket.emit('write', who);
                  $('#who').val('');
                  return false;
                });

    script(src='scripts.js')
    // Bootstrap core JavaScript
    script(src='assets/js/bootstrap.js')
